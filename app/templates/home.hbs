{{page-title "Home"}}

<div class="home-container">
	<h2 class="home-title">{{this.user.firstName}}'s Nutrition Page</h2>
	<div class="home-content">
		<div class="user-info-container">
			<div class="user-info-header">
				<div>
					{{this.user.firstName}}'s Stats
				</div>
			</div>
			<div class="user-info-content">
				<ul>
					<li class="user-info-list-item">Daily Calories: {{this.user.kcalDaily}}</li>
					<li class="user-info-list-item">Current Weight: {{this.user.weight}}</li>
				</ul>
			</div>
		</div>
		<div class="nutrition-container">
			<div class="nutrition-header">
				<div>
					Nutrition Stats
				</div>
			</div>
			<div class="nutrition-content">
				<ul>
					<li class="nutrition-list-item">Calories: {{number-format this.kcalTotal}} / {{this.user.kcalDaily}}</li>
					<li class="nutrition-list-item">Protein: {{number-format this.proteinTotal}}</li>
					<li class="nutrition-list-item">Fat: {{number-format this.fatTotal}}</li>
					<li class="nutrition-list-item">Carbs: {{number-format this.carbsTotal}}</li>
					<li class="nutrition-list-item">Sodium: {{number-format this.sodiumTotal}}</li>
					<li class="nutrition-list-item">Fiber: {{number-format this.fiberTotal}}</li>
				</ul>
			</div>
		</div>
		<div class="diary-container">
			<div class="diary-header">
				<div>
					Meal Planner
				</div>	
			</div>
			<div class="diary-content">
				<ul>
					{{#each this.meals as |meal|}}
						<div class="meal-list-item-container">
							<li class="meal-list-item" {{on "click" (fn this.changeSection meal)}}>
								<h5 class="meal-list-item-header">{{meal.name}}</h5>
							</li>
							<div {{on "click" (fn this.removeSection meal)}} class="close">x</div>
						</div>
						{{#if (eq this.currentSection.name meal.name)}}
							<ul>
								<div class="diary-list-item-header-container">
									<div class="diary-list-item-item">Name</div>
									<div class="diary-list-item-item">Serving</div>
									<div class="diary-list-item-item">Calories</div>
								</div>
								{{#each meal.foods as |food index|}}
									<li class="diary-list-item">
										<div class="diary-list-item-content">
											<div class="diary-list-item-item">{{food.name}}</div>
											<div class="diary-list-item-item">{{food.serving}}g</div>
											<div class="diary-list-item-item">{{food.kcal}}</div>
										</div>
										<div {{on "click" (fn this.removeFood food meal)}} class="close">x</div>
									</li>
								{{/each}}
							</ul>
							<div class="submit-container">
								<input type="text" class="generic-input" id="food" {{on "change" this.update}}>
								<button type="button" class="generic-button" {{on "click" this.searchFood}}>
									<div>
										Search
									</div> 
								</button>
							</div>
						{{/if}}
					{{/each}}
				</ul>
					<Dropdown
						@mealList={{this.mealList}}
						@mealSelected={{this.mealSelected}}
						@closeLater={{this.closeLater}} />
			</div>
		</div>
	</div>
</div>

{{#if this.isShowingModal}}
	<ModalDialog @onClickOverlay={{this.closeModal}}>
		<div class="product-list-container">
			<div class="product-list-header">
				<h6>Name</h6>
				<h6>Serving</h6>
				<h6>Kcal</h6>
			</div>
			<ul class="product-list">
				{{#each this.products as |product|}}
					{{#if (and product.name product.kcal)}}
						<li class="product-list-item">
							<h3 class="product-name" {{on "click" (fn this.addFood product)}}>{{product.name}}</h3>
							<div class="input-container"><input class="product-list-input" type="number" id="serving" value="100" {{on "change" this.update}}> <p>grams</p></div>
							<p>{{product.kcal}} kcal</p>
						</li>
					{{/if}}
				{{/each}}
			</ul>
		</div>
	</ModalDialog>
{{/if}}

<Logout/>

{{outlet}}